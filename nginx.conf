user zhangxingwang zhangxingwang;
worker_processes auto;

# uncomment this if you are not running nginx under supervisord
daemon off;

pid /tmp/nginx.pid;

events {
    worker_connections 100;
    multi_accept on;
    use epoll;
}

http {
        server_tokens off;
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;

    keepalive_timeout 30s;
    client_header_timeout 20s;
    client_body_timeout 20s;
    send_timeout 20s;
    reset_timedout_connection on;

    client_body_buffer_size 128k;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    ssl_session_timeout 4h;
    ssl_session_cache shared:SSL:50m;
    ssl_session_tickets on;

    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
        ssl_ciphers 'ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA:ECDHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA';
    ssl_prefer_server_ciphers on;
    ssl_dhparam /etc/ssl/certs/dhparam.pub.pem;

    resolver 119.29.29.29 114.114.114.114 114.114.115.115 182.254.116.116 valid=300s ipv6=off;
    resolver_timeout 10s;

            gzip off;
        gzip_static off;
    
    open_file_cache max=100000 inactive=20s;
    open_file_cache_valid 30s;
    open_file_cache_min_uses 2;
    open_file_cache_errors on;

    proxy_http_version 1.1;
    proxy_buffers 256 8k;
    proxy_intercept_errors on;
    proxy_pass_request_headers on;
    proxy_set_header Host $http_host;
    proxy_set_header Accept-Encoding "";
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    proxy_set_header X-Request-Code $msec-$cookie_vb;
    proxy_redirect off;
    # Only retry if there was a communication error, not a timeout
    # on the Tornado server (to avoid propagating "queries of death"
    # to all frontends)
    proxy_next_upstream error;
    proxy_next_upstream_timeout 30s;
    proxy_next_upstream_tries 2;
    proxy_connect_timeout 10s;
    proxy_read_timeout 180s;

    access_log off;
    log_format logstash_json escape=json '{ "@timestamp": "$time_iso8601", '
                             '"@type": "nginx", '
                             '"@fields": { '
                             '"user_code": "$cookie_vu", '
                             '"browser_code": "$cookie_vb", '
                             '"remote_addr": "$remote_addr", '
                             '"request": "$request", '
                             '"request_time": "$request_time", '
                             '"request_code": "$msec-$cookie_vb", '
                             '"request_method": "$request_method", '
                             '"status": "$status", '
                             '"body_bytes_sent": "$body_bytes_sent", '
                             '"http_referrer": "$http_referer", '
                             '"http_user_agent": "$http_user_agent", '
                             '"http_x_forwarded_for": "$http_x_forwarded_for" } }';

                    upstream vendor_operator-tornado {
                        server 127.0.0.1:2080;
                    }
                            upstream store_operator_mobile-tornado {
                        server 127.0.0.1:2030;
                    }
                            upstream api-tornado {
                        server 127.0.0.1:2050;
                    }
                            upstream operator-tornado {
                        server 127.0.0.1:2010;
                    }
                            upstream store_operator-tornado {
                        server 127.0.0.1:2020;
                    }
                            upstream mini_program-tornado {
                        server 127.0.0.1:2090;
                    }
                            upstream mobile-tornado {
                        server 127.0.0.1:2040;
                    }
                            upstream shopper-tornado {
                        server 127.0.0.1:2000;
                    }
            
            
            map $request_method $shopper_POST_limit {
                default "";
                POST $binary_remote_addr;
            }
            limit_req_zone $shopper_POST_limit zone=shopper_POST_limit_zone:10m rate=2r/s;
        
    
    
    
    server {
        server_name vop.lijiababy.com.cn ;
        if ($request_method !~ ^(GET|HEAD|POST|PUT|PATCH|DELETE|OPTIONS)$ ) {
             return 444;
        }
        error_log /home/zhangxingwang/Desktop/honovation/ljmall/development/log/dev-server/nginx/vop.lijiababy.com.cn-error.log;
                access_log /home/zhangxingwang/Desktop/honovation/ljmall/development/log/dev-server/nginx/vop.lijiababy.com.cn-access.log logstash_json;
                            location ^~ /.well-known/ {
                allow all;
                default_type "text/plain";
                root /var/www/html;
            }
                                                                        listen 80;
                                                                                                                                                                                                                                location = /MP_verify_Rcuo5c2fBi2FUvIl.txt {
                                                                        expires max; access_log off; root /home/zhangxingwang/Desktop/honovation/ljmall/static;
                                                            }
                                location = /MP_verify_Ax5bYztK67bDbq0M.txt {
                                                                        expires max; access_log off; root /home/zhangxingwang/Desktop/honovation/ljmall/static;
                                                            }
                                location ~ ^/static/images/(logo.*\.gif)$ {
                                                                        
                    set $logo_file $1;
                    alias /home/zhangxingwang/Desktop/honovation/ljmall/static/images/$logo_file;
                    access_log off;
                    expires max;
                    if ($query_string !~ "v=.+") {
                        expires 4h;
                    }
                    
                                                            }
                                location = / {
                                                                        root /home/zhangxingwang/Desktop/honovation/ljmall/static/vendor_operator/dist; try_files /index.html =404;
                                                            }
                                location ^~ /api/ {
                                                                        proxy_pass http://vendor_operator-tornado;
                                                            }
                                location ~ ^/static/v-(.*)-(.*)/ {
                                                                        
                
                alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/inline-static-files/$1/$2;
                access_log off;
                expires max;
                
                                                            
                                location / {
                                                                        root /home/zhangxingwang/Desktop/honovation/ljmall/static/vendor_operator/dist; try_files /index.html =404;
                                                            }
                                location = /favicon.ico {
                                                                        alias /home/zhangxingwang/Desktop/honovation/ljmall/static/vendor_operator/favicon.ico;
                                                                                                
                    access_log off; log_not_found off;
                    expires 1M;
                    
                                                            }
                                location /static/ {
                                                                        
                    
                    alias /home/zhangxingwang/Desktop/honovation/ljmall/static/;
                    access_log off;
                    expires max;
                    if ($query_string !~ "v=.+") {
                        expires 4h;
                    }
                    
                                                            }
                                location = /robots.txt {
                                                                        alias /home/zhangxingwang/Desktop/honovation/ljmall/static/vendor_operator/robots.txt;
                                                                                                
                    access_log off; log_not_found off;
                    expires 1h;
                    
                                                            }
                                location ^~ /fupload/ {
                                                                        
                client_max_body_size 1m;
                client_body_temp_path /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/uploaded-files 1;
                client_body_in_file_only clean;
                proxy_set_header X-UPLOAD-FILE-PATH $request_body_file;
                proxy_set_body off;
                proxy_pass http://vendor_operator-tornado;
            
                                                            }
                                                                                        }
    
    
    server {
        server_name msop.dev.lijiabaobei.com ;
        if ($request_method !~ ^(GET|HEAD|POST|PUT|PATCH|DELETE|OPTIONS)$ ) {
             return 444;
        }
        error_log /home/zhangxingwang/Desktop/honovation/ljmall/development/log/dev-server/nginx/msop.dev.lijiabaobei.com-error.log;
                access_log /home/zhangxingwang/Desktop/honovation/ljmall/development/log/dev-server/nginx/msop.dev.lijiabaobei.com-access.log logstash_json;
                            location ^~ /.well-known/ {
                allow all;
                default_type "text/plain";
                root /var/www/html;
            }
                                                                        listen 80;
                                                                                                                                                                                                                                location = /MP_verify_Rcuo5c2fBi2FUvIl.txt {
                                                                        expires max; access_log off; root /home/zhangxingwang/Desktop/honovation/ljmall/static;
                                                            }
                                location ^~ /buckets/dish/ {
                                                                        
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/dish/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location = /MP_verify_Ax5bYztK67bDbq0M.txt {
                                                                        expires max; access_log off; root /home/zhangxingwang/Desktop/honovation/ljmall/static;
                                                            }
                                location ~ ^/static/images/(logo.*\.gif)$ {
                                                                        
                    set $logo_file $1;
                    alias /home/zhangxingwang/Desktop/honovation/ljmall/static/images/$logo_file;
                    access_log off;
                    expires max;
                    if ($query_string !~ "v=.+") {
                        expires 4h;
                    }
                    
                                                            }
                                location = / {
                                                                        root /home/zhangxingwang/Desktop/honovation/ljmall/static/store_operator_mobile/dist; try_files /index.html =404;
                                                            }
                                location ^~ /api/ {
                                                                        proxy_pass http://store_operator_mobile-tornado;
                                                            }
                                location ~ ^/static/v-(.*)-(.*)/ {
                                                                        
                
                alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/inline-static-files/$1/$2;
                access_log off;
                expires max;
                
                                                            }
                                location / {
                                                                        root /home/zhangxingwang/Desktop/honovation/ljmall/static/store_operator_mobile/dist; try_files /index.html =404;
                                                            }
                                location = /favicon.ico {
                                                                        alias /home/zhangxingwang/Desktop/honovation/ljmall/static/store_operator_mobile/favicon.ico;
                                                                                                
                    access_log off; log_not_found off;
                    expires 1M;
                    
                                                            }
                                location /static/ {
                                                                        
                    
                    alias /home/zhangxingwang/Desktop/honovation/ljmall/static/;
                    access_log off;
                    expires max;
                    if ($query_string !~ "v=.+") {
                        expires 4h;
                    }
                    
                                                            }
                                location = /robots.txt {
                                                                        alias /home/zhangxingwang/Desktop/honovation/ljmall/static/store_operator_mobile/robots.txt;
                                                                                                
                    access_log off; log_not_found off;
                    expires 1h;
                    
                                                            }
                                location ^~ /fupload/ {
                                                                        
                client_max_body_size 1m;
                client_body_temp_path /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/uploaded-files 1;
                client_body_in_file_only clean;
                proxy_set_header X-UPLOAD-FILE-PATH $request_body_file;
                proxy_set_body off;
                proxy_pass http://store_operator_mobile-tornado;
            
                                                            }
                                                                                        }
    
    
    server {
        server_name api.dev.lijiabaobei.com ;
        if ($request_method !~ ^(GET|HEAD|POST|PUT|PATCH|DELETE|OPTIONS)$ ) {
             return 444;
        }
        error_log /home/zhangxingwang/Desktop/honovation/ljmall/development/log/dev-server/nginx/api.dev.lijiabaobei.com-error.log;
                access_log /home/zhangxingwang/Desktop/honovation/ljmall/development/log/dev-server/nginx/api.dev.lijiabaobei.com-access.log logstash_json;
                            location ^~ /.well-known/ {
                allow all;
                default_type "text/plain";
                root /var/www/html;
            }
                                                                        listen 80;
                                                                                                                                                                                                                                location / {
                                                                        
                        
            add_header X-Content-Type-Options nosniff;
            
            proxy_pass http://api-tornado;
            
                        
                                                            }
                                                                                        }
    
    
    server {
        server_name op.dev.lijiabaobei.com ;
        if ($request_method !~ ^(GET|HEAD|POST|PUT|PATCH|DELETE|OPTIONS)$ ) {
             return 444;
        }
        error_log /home/zhangxingwang/Desktop/honovation/ljmall/development/log/dev-server/nginx/op.dev.lijiabaobei.com-error.log;
                access_log /home/zhangxingwang/Desktop/honovation/ljmall/development/log/dev-server/nginx/op.dev.lijiabaobei.com-access.log logstash_json;
                            location ^~ /.well-known/ {
                allow all;
                default_type "text/plain";
                root /var/www/html;
            }
                                                                        listen 80;
                                                                                                                                                                                                                                location = /favicon.ico {
                                                                        alias /home/zhangxingwang/Desktop/honovation/ljmall/static/operator/favicon.ico;
                                                                                                
                    access_log off; log_not_found off;
                    expires 1M;
                    
                                                            }
                                location = /customer-service {
                                                                        
                                            add_header X-Content-Type-Options nosniff;
                                            add_header X-Frame-Options "ALLOW-FROM https://lijia.kf5.com/agent/";
                                            add_header X-XSS-Protection "1; mode=block";
                                            add_header X-UA-Compatible "IE=Edge,chrome=1";
                                            proxy_pass http://operator-tornado;
                                          
                                                            }
                                location /static/ {
                                                                        
                    
                    alias /home/zhangxingwang/Desktop/honovation/ljmall/static/;
                    access_log off;
                    expires max;
                    if ($query_string !~ "v=.+") {
                        expires 4h;
                    }
                    
                                                            }
                                location ~ ^/static/images/(logo.*\.gif)$ {
                                                                        
                    set $logo_file $1;
                    alias /home/zhangxingwang/Desktop/honovation/ljmall/static/images/$logo_file;
                    access_log off;
                    expires max;
                    if ($query_string !~ "v=.+") {
                        expires 4h;
                    }
                    
                                                            }
                                location = / {
                                                                        
                proxy_pass http://operator-tornado;
                
        add_header X-Content-Type-Options nosniff;
        add_header X-Frame-Options SAMEORIGIN;
        add_header X-XSS-Protection "1; mode=block";
        add_header X-UA-Compatible "IE=Edge,chrome=1";
        
        
                
                                                            }
                                location ~ ^/static/v-(.*)-(.*)/ {
                                                                        
                
                alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/inline-static-files/$1/$2;
                access_log off;
                expires max;
                
                                                            }
                                location ^~ /buckets/op-report/ {
                                                                        
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/op-report/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location ^~ /buckets/vendor-compensation/ {
                                                                        
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/vendor-compensation/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location / {
                                                                        
                proxy_pass http://operator-tornado;
                
        add_header X-Content-Type-Options nosniff;
        add_header X-Frame-Options SAMEORIGIN;
        add_header X-XSS-Protection "1; mode=block";
        add_header X-UA-Compatible "IE=Edge,chrome=1";
        
        
                
                                                            }
                                location = /robots.txt {
                                                                        alias /home/zhangxingwang/Desktop/honovation/ljmall/static/operator/robots.txt;
                                                                                                
                    access_log off; log_not_found off;
                    expires 1h;
                    
                                                            }
                                location ^~ /fupload/ {
                                                                        
                client_max_body_size 10m;
                client_body_temp_path /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/uploaded-files 1;
                client_body_in_file_only clean;
                proxy_set_header X-UPLOAD-FILE-PATH $request_body_file;
                proxy_set_body off;
                proxy_pass http://operator-tornado;
            
                                                            }
                                                                                                            error_page 404 /404.html;
                        location = /404.html {
                            root /home/zhangxingwang/Desktop/honovation/ljmall/static/operator/error-page;
                            }
                                            error_page 500 /500.html;
                        location = /500.html {
                            root /home/zhangxingwang/Desktop/honovation/ljmall/static/operator/error-page;
                            }
                                                            }
    
    
    server {
        server_name sop.dev.lijiabaobei.com ;
        if ($request_method !~ ^(GET|HEAD|POST|PUT|PATCH|DELETE|OPTIONS)$ ) {
             return 444;
        }
        error_log /home/zhangxingwang/Desktop/honovation/ljmall/development/log/dev-server/nginx/sop.dev.lijiabaobei.com-error.log;
                access_log /home/zhangxingwang/Desktop/honovation/ljmall/development/log/dev-server/nginx/sop.dev.lijiabaobei.com-access.log logstash_json;
                            location ^~ /.well-known/ {
                allow all;
                default_type "text/plain";
                root /var/www/html;
            }
                                                                        listen 80;
                                                                                                                                                                                                                                location = /favicon.ico {
                                                                        alias /home/zhangxingwang/Desktop/honovation/ljmall/static/store_operator/favicon.ico;
                                                                                                
                    access_log off; log_not_found off;
                    expires 1M;
                    
                                                            }
                                location /static/ {
                                                                        
                    
                    alias /home/zhangxingwang/Desktop/honovation/ljmall/static/;
                    access_log off;
                    expires max;
                    if ($query_string !~ "v=.+") {
                        expires 4h;
                    }
                    
                                                            }
                                location ~ ^/static/images/(logo.*\.gif)$ {
                                                                        
                    set $logo_file $1;
                    alias /home/zhangxingwang/Desktop/honovation/ljmall/static/images/$logo_file;
                    access_log off;
                    expires max;
                    if ($query_string !~ "v=.+") {
                        expires 4h;
                    }
                    
                                                            }
                                location = / {
                                                                        
                proxy_pass http://store_operator-tornado;
                
        add_header X-Content-Type-Options nosniff;
        add_header X-Frame-Options SAMEORIGIN;
        add_header X-XSS-Protection "1; mode=block";
        add_header X-UA-Compatible "IE=Edge,chrome=1";
        
        
                
                                                            }
                                location / {
                                                                        
                proxy_pass http://store_operator-tornado;
                
        add_header X-Content-Type-Options nosniff;
        add_header X-Frame-Options SAMEORIGIN;
        add_header X-XSS-Protection "1; mode=block";
        add_header X-UA-Compatible "IE=Edge,chrome=1";
        
        
                
                                                            }
                                location ~ ^/static/v-(.*)-(.*)/ {
                                                                        
                
                alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/inline-static-files/$1/$2;
                access_log off;
                expires max;
                
                                                            }
                                location = /robots.txt {
                                                                        alias /home/zhangxingwang/Desktop/honovation/ljmall/static/store_operator/robots.txt;
                                                                                                
                    access_log off; log_not_found off;
                    expires 1h;
                    
                                                            }
                                location ^~ /fupload/ {
                                                                        
                client_max_body_size 1m;
                client_body_temp_path /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/uploaded-files 1;
                client_body_in_file_only clean;
                proxy_set_header X-UPLOAD-FILE-PATH $request_body_file;
                proxy_set_body off;
                proxy_pass http://store_operator-tornado;
            
                                                            }
                                                                                                            error_page 404 /404.html;
                        location = /404.html {
                            root /home/zhangxingwang/Desktop/honovation/ljmall/static/store_operator/error-page;
                            }
                                            error_page 500 /500.html;
                        location = /500.html {
                            root /home/zhangxingwang/Desktop/honovation/ljmall/static/store_operator/error-page;
                            }
                                                            }
    
    
    server {
        server_name mp.dev.lijiabaobei.com ;
        if ($request_method !~ ^(GET|HEAD|POST|PUT|PATCH|DELETE|OPTIONS)$ ) {
             return 444;
        }
        error_log /home/zhangxingwang/Desktop/honovation/ljmall/development/log/dev-server/nginx/mp.dev.lijiabaobei.com-error.log;
                access_log /home/zhangxingwang/Desktop/honovation/ljmall/development/log/dev-server/nginx/mp.dev.lijiabaobei.com-access.log logstash_json;
                            location ^~ /.well-known/ {
                allow all;
                default_type "text/plain";
                root /var/www/html;
            }
                                                                        listen 80;
                                                                                                                                                                                                                                location / {
                                                                        
                        
            add_header X-Content-Type-Options nosniff;
            
            proxy_pass http://mini_program-tornado;
            
                        
                                                            }
                                                                                        }
    
    
    server {
        server_name m.dev.lijiabaobei.com ;
        if ($request_method !~ ^(GET|HEAD|POST|PUT|PATCH|DELETE|OPTIONS)$ ) {
             return 444;
        }
        error_log /home/zhangxingwang/Desktop/honovation/ljmall/development/log/dev-server/nginx/m.dev.lijiabaobei.com-error.log;
                access_log /home/zhangxingwang/Desktop/honovation/ljmall/development/log/dev-server/nginx/m.dev.lijiabaobei.com-access.log logstash_json;
                            location ^~ /.well-known/ {
                allow all;
                default_type "text/plain";
                root /var/www/html;
            }
                                                                        listen 80;
                                                                                                                                                                                                                                location = /MP_verify_Rcuo5c2fBi2FUvIl.txt {
                                                                        expires max; access_log off; root /home/zhangxingwang/Desktop/honovation/ljmall/static;
                                                            }
                                location /static/ {
                                                                        
                    
                    alias /home/zhangxingwang/Desktop/honovation/ljmall/static/;
                    access_log off;
                    expires max;
                    if ($query_string !~ "v=.+") {
                        expires 4h;
                    }
                    
                                                            }
                                location ^~ /payment-channel/ {
                                                                        proxy_pass http://mobile-tornado;
                                                            }
                                location = /aff {
                                                                        proxy_pass http://mobile-tornado;
                                                            }
                                location ^~ /crp-index {
                                                                        proxy_pass http://mobile-tornado;
                                                            }
                                location = /MP_verify_Ax5bYztK67bDbq0M.txt {
                                                                        expires max; access_log off; root /home/zhangxingwang/Desktop/honovation/ljmall/static;
                                                            }
                                location ^~ /image-block {
                                                                        proxy_pass http://mobile-tornado;
                                                            }
                                location ^~ /fupload/ {
                                                                        
                client_max_body_size 1m;
                client_body_temp_path /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/uploaded-files 1;
                client_body_in_file_only clean;
                proxy_set_header X-UPLOAD-FILE-PATH $request_body_file;
                proxy_set_body off;
                proxy_pass http://mobile-tornado;
            
                                                            }
                                location ~ ^/static/images/(logo.*\.gif)$ {
                                                                        
                    set $logo_file $1;
                    alias /home/zhangxingwang/Desktop/honovation/ljmall/static/images/$logo_file;
                    access_log off;
                    expires max;
                    if ($query_string !~ "v=.+") {
                        expires 4h;
                    }
                    
                                                            }
                                location ^~ /wl/ {
                                                                        proxy_pass http://mobile-tornado;
                                                            }
                                location / {
                                                                        
                if ($http_x_requested_with = XMLHttpRequest) {
                    proxy_pass http://mobile-tornado;
                }
                if ($http_x_requested_with = Fetch) {
                    proxy_pass http://mobile-tornado;
                }
                proxy_pass http://mobile-tornado/h/;
            
                                                            }
                                location = /js-error {
                                                                        proxy_pass http://mobile-tornado;
                                                            }
                                location ^~ /go/ {
                                                                        proxy_pass http://mobile-tornado;
                                                            }
                                location = /sitemap.xml {
                                                                        proxy_pass http://mobile-tornado;
                                                            }
                                location ^~ /api {
                                                                        proxy_pass http://mobile-tornado;
                                                            }
                                location = /favicon.ico {
                                                                        alias /home/zhangxingwang/Desktop/honovation/ljmall/static/mobile/favicon.ico;
                                                                                                
                    access_log off; log_not_found off;
                    expires 1M;
                    
                                                            }
                                location ^~ /block {
                                                                        proxy_pass http://mobile-tornado;
                                                            }
                                location ~ ^/static/v-(.*)-(.*)/ {
                                                                        
                
                alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/inline-static-files/$1/$2;
                access_log off;
                expires max;
                
                                                            }
                                location ^~ /index {
                                                                        proxy_pass http://mobile-tornado;
                                                            }
                                location = / {
                                                                        
                if ($http_x_requested_with = XMLHttpRequest) {
                    proxy_pass http://mobile-tornado;
                }
                if ($http_x_requested_with = Fetch) {
                    proxy_pass http://mobile-tornado;
                }
                proxy_pass http://mobile-tornado/h/;
            
                                                            }
                                location = /nlrft5lbY6.txt {
                                                                        expires max; access_log off; root /home/zhangxingwang/Desktop/honovation/ljmall/static;
                                                            }
                                location ^~ /buckets/mobile-card-image/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/mobile-card-image/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location ^~ /invoice-pdf/ {
                                                                        proxy_pass http://mobile-tornado;
                                                            }
                                location = /robots.txt {
                                                                        alias /home/zhangxingwang/Desktop/honovation/ljmall/static/mobile/robots.txt;
                                                                                                
                    access_log off; log_not_found off;
                    expires 1h;
                    
                                                            }
                                                                                                            error_page 404 /404.html;
                        location = /404.html {
                            root /home/zhangxingwang/Desktop/honovation/ljmall/static/mobile/error-page;
                            }
                                            error_page 500 /500.html;
                        location = /500.html {
                            root /home/zhangxingwang/Desktop/honovation/ljmall/static/mobile/error-page;
                            }
                                                            }
    
    
    server {
        server_name shopper.dev.lijiabaobei.com ;
        if ($request_method !~ ^(GET|HEAD|POST|PUT|PATCH|DELETE|OPTIONS)$ ) {
             return 444;
        }
        error_log /home/zhangxingwang/Desktop/honovation/ljmall/development/log/dev-server/nginx/shopper.dev.lijiabaobei.com-error.log;
                access_log /home/zhangxingwang/Desktop/honovation/ljmall/development/log/dev-server/nginx/shopper.dev.lijiabaobei.com-access.log logstash_json;
                            location ^~ /.well-known/ {
                allow all;
                default_type "text/plain";
                root /var/www/html;
            }
                                                                        listen 80;
                                                                                                                                                                                                                                location /static/ {
                                                                        
                    
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
                    alias /home/zhangxingwang/Desktop/honovation/ljmall/static/;
                    access_log off;
                    expires max;
                    if ($query_string !~ "v=.+") {
                        expires 4h;
                    }
                    
                                                            }
                                location /login {
                                                                        limit_req zone=shopper_POST_limit_zone burst=3 nodelay;

proxy_pass http://shopper-tornado;
                                                            }
                                location ^~ /buckets/shopper-avatar/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/shopper-avatar/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location ^~ /buckets/product-promotion-image/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/product-promotion-image/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location ^~ /fupload/ {
                                                                        
                client_max_body_size 3m;
                client_body_temp_path /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/uploaded-files 1;
                client_body_in_file_only clean;
                proxy_set_header X-UPLOAD-FILE-PATH $request_body_file;
                proxy_set_body off;
                proxy_pass http://shopper-tornado;
            
                                                            }
                                location ^~ /buckets/captcha-image/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/captcha-image/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location ~ ^/static/images/(logo.*\.gif)$ {
                                                                        
                    set $logo_file $1;
                    alias /home/zhangxingwang/Desktop/honovation/ljmall/static/images/$logo_file;
                    access_log off;
                    expires max;
                    if ($query_string !~ "v=.+") {
                        expires 4h;
                    }
                    
                                                            }
                                location ^~ /buckets/store/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/store/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location ^~ /buckets/promotion-image/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/promotion-image/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location / {
                                                                        
                proxy_pass http://shopper-tornado;
                
        add_header X-Content-Type-Options nosniff;
        add_header X-Frame-Options SAMEORIGIN;
        add_header X-XSS-Protection "1; mode=block";
        add_header X-UA-Compatible "IE=Edge,chrome=1";
        
        
                
                                                            }
                                location ^~ /buckets/small-category-nav-image/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/small-category-nav-image/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location ^~ /buckets/recommendation-config/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/recommendation-config/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location ^~ /buckets/text-link-block-image/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/text-link-block-image/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location = /favicon.ico {
                                                                        alias /home/zhangxingwang/Desktop/honovation/ljmall/static/shopper/favicon.ico;
                                                                                                
                    access_log off; log_not_found off;
                    expires 1M;
                    
                                                            }
                                location ^~ /buckets/invoice/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/invoice/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location ^~ /buckets/collection-image/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/collection-image/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location ^~ /buckets/product-badge/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/product-badge/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location ^~ /buckets/product-feed/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/product-feed/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location ^~ /buckets/product-image/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/product-image/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location ~ ^/static/v-(.*)-(.*)/ {
                                                                        
                
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
                alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/inline-static-files/$1/$2;
                access_log off;
                expires max;
                
                                                            }
                                location ^~ /buckets/flash-sale/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/flash-sale/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location ^~ /buckets/lottery/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/lottery/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location ^~ /buckets/brand-promotion-image/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/brand-promotion-image/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location ^~ /buckets/block-image/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/block-image/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location = / {
                                                                        
                proxy_pass http://shopper-tornado;
                
        add_header X-Content-Type-Options nosniff;
        add_header X-Frame-Options SAMEORIGIN;
        add_header X-XSS-Protection "1; mode=block";
        add_header X-UA-Compatible "IE=Edge,chrome=1";
        
        
                
                                                            }
                                location ^~ /buckets/brand-focus-image/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/brand-focus-image/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                location = /robots.txt {
                                                                        alias /home/zhangxingwang/Desktop/honovation/ljmall/static/shopper/robots.txt;
                                                                                                
                    access_log off; log_not_found off;
                    expires 1h;
                    
                                                            }
                                location ^~ /buckets/special-block-image/ {
                                                                        
            
            valid_referers none blocked *.lijiababy.com.cn *.lijiabaobei.com servicewechat.com/wx484cd4ab004a7a34/;
            if ($invalid_referer) {
                return 403;
            }
            
            alias /home/zhangxingwang/Desktop/honovation/ljmall/development/var/buckets/special-block-image/;
            access_log off;
            expires max;
            if ($query_string !~ "v=.+") {
                expires 4h;
            }
            
                                                            }
                                                                                                            error_page 404 /404.html;
                        location = /404.html {
                            root /home/zhangxingwang/Desktop/honovation/ljmall/static/shopper/error-page;
                            }
                                            error_page 500 /500.html;
                        location = /500.html {
                            root /home/zhangxingwang/Desktop/honovation/ljmall/static/shopper/error-page;
                            }
                                                            }
    
    }
